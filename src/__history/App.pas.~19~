unit App;

interface

uses
  System.SysUtils,
  Horse,
  Horse.CORS,
  Horse.Jhonson,
  Horse.GBSwagger;

type
  TApp = class
  private
    LApp: THorse;
    procedure Middlewares;
  public
    function InitServer(const port: Integer): THorse;
    constructor Create;
  end;

implementation

{ TApp }

constructor TApp.Create;
begin
  Self.LApp := THorse.Create;
  Self.Middlewares;
end;

function TApp.InitServer(const port: Integer): THorse;
begin
  try
    Self.LApp.Listen(port,
    procedure
    begin
      Writeln('/// Api_pageneable on \\\');
      Writeln(Format(''))
    end
    );
  except on E: Exception do
    begin

    end;

  end;
  Self.LApp.Listen(port);
end;

procedure TApp.Middlewares;
begin
  Self.LApp.Use(Jhonson);
  Self.LApp.Use(CORS);
  Self.LApp.Use(HorseSwagger);
end;

end.
